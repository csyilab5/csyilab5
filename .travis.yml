language: java
jdk:
- oraclejdk7
deploy:
- provider: s3
  access_key_id: AKIAIV4RZ3KXUCDT54DA
  secret_access_key: &1
    secure: WVCjR1uH1q5hGo9inQVT6VZiGPDRtzagJZs8EpP7AZi8i5RC4EvxCzTslLAZDWQJPZO1FAJXtqtqF3op7BkA7iuKsc8rf5uy1maZW7mlRTPGX+PbMTYeGGyWXcIrErYZbgXQBBr/JdAv2GmMO0MGhSFL7F7YwdkTn2EP7nsVttjU+OZLRWsLa8IudmhN7bom3yjwCeB2DDDPEO1Qb/HeaKio+MtRAPbKgXJ5gxhwSsEFfYaOUohwajeXBK9QALi2BnUM00PnjT0J35x+AFuRYZ99uTqepwzar0FX0rFYk1hrzCis96SzgW8bVRnGrILm0YqpkoE9wza5fvEmvciVOHs2+yZfQ5Wm5ksHqUdOELPYb4CWbiw+s3IjdpxDMEh09lrMHgA0lt5JU6EwcNYNrqND9efycF08tu798TECge/IUFSJUU9Vi+bEUhFqurb9xzH0SkL5eCWtNa+lEA/V5AaXOCS9VQ4qWdRDi+jZajSUtzj3roW+4DJn/EEcZkoUjxvBTRqLJ9ShxbK+F2SfCks2oGU/ZwEUGi3WoFccF3M5Kd+ITMl4wVofCxGyGC8FgD8HSlcwN+OEokOhTTsBVQysyqC1LkI6F1iFCyeg4B6dTAyUQXODxJgt44PM8GApkpIyt2UWJ/ZKWEiFg3Fj/zq0ixMA+IjF8xaHYu/lR2g=
  local_dir: dpl_cd_upload
  skip_cleanup: true
  on: &2
    repo: bogdan-constandache/csyilab5
  bucket: lab06-bucket
  region: eu-west-1
- provider: codedeploy
  bucket: lab06-bucket
  access_key_id: AKIAIV4RZ3KXUCDT54DA
  secret_access_key: *1
  bucket: lab06-bucket
  key: csyi-lab-5.tgz
  bundle_type: tgz
  application: csyilab5
  deployment_group: DemoFleet
  on: *2
  region: eu-west-1
before_deploy:
- mkdir -p dpl_cd_upload
- cp -r codedeploy target
- cp target/cloudshape-1.0.0.jar target/codedeploy
- tar -czvf dpl_cd_upload/csyi-lab-5.tgz -C target/codedeploy .
- mv csyi-lab-5.tgz dpl_cd_upload/csyi-lab-5.tgz
